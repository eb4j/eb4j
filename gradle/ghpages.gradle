githubPages {
    repoUri = 'https://github.com/eb4j/eb4j.git'
    credentials {
        username = project.githubToken
        password = ''
    }
    targetBranch = 'gh-pages'
    pages {
        from 'build/asciidoc/html5'
        from 'eb4j-core/build/docs/'
        from 'eb4j-core/build/reports/'
    }
}

version = '1.99.0-SNAPSHOT'
asciidoctorj {
    version = '1.5.4'
}

asciidoctor {
    backends = ['html5','pdf']
    requires = ['asciidoctor-diagram']
    attributes 'build-gradle': file('build.gradle'),
            'endpoint-url': 'http://eb4j.github.io/eb4j/',
            'source-highlighter': 'coderay',
            'imagesdir': 'images',
            'toc': 'left',
            'icons': 'font',
            'setanchors': 'true',
            'idprefix': '',
            'idseparator': '-',
            'docinfo1': 'true'
}

publishGhPages.dependsOn ':eb4j-core:check'
publishGhPages.dependsOn ':eb4j-core:javadoc'
publishGhPages.dependsOn asciidoctor

